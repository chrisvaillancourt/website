---
import { weatherSunny, weatherNight } from '@/lib/icons';
import Icon from '@/components/Icon.astro';
---

<input id="theme-toggle" type="checkbox" name="theme-toggle" />
<label for="theme-toggle" id="theme-toggle-label">
  <Icon class="dark-mode-hide" name="dark mode icon" path={weatherNight} />
  <Icon class="light-mode-hide" name="light mode icon" path={weatherSunny} />
</label>

<style is:global>
  #theme-toggle:checked ~ * {
    --bg-color: var(--bg-color-dark);
    --color: var(--color-dark);
  }
  @media (prefers-color-scheme: dark) {
    #theme-toggle:checked ~ * {
      --bg-color: var(--bg-color-light);
      --color: var(--color-light);
    }
  }
  .light-mode-hide {
    display: none;
  }
  @media (prefers-color-scheme: dark) {
    .dark-mode-hide {
      display: none;
    }
  }
  @media (prefers-color-scheme: dark) {
    .light-mode-hide {
      display: initial;
    }
  }

  #theme-toggle,
  #theme-toggle-label {
    position: absolute;
  }
  #theme-toggle {
    opacity: 0;
    width: 1rem;
    height: 1rem;
  }
  #theme-toggle-label {
    background-color: var(--color);
    color: var(--bg-color);
    cursor: pointer;
    background: var(--color);
    color: var(--bg-color);
    padding: 1rem;
    top: var(--content-padding-block-start);
    left: 85vw;
    display: flex;
    align-items: center;
    border-radius: 6px;
    user-select: none;
  }
  #theme-toggle:focus + #theme-toggle-label {
    /* TODO add focus styles */
    /* outline: 2px dashed red; */
    /* outline-offset: 4px; */
  }
  #theme-toggle-label:active {
    transform: translateY(1px);
  }
  #theme-toggle:checked + #theme-toggle-label:after {
    color: var(--bg-color);
  }
</style>
