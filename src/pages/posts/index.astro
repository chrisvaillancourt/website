---
import Layout from '@/layouts/BaseLayout.astro';
import Link from '@/components/Link.astro';

interface Frontmatter {
  title: string;
  summary: string;
  draft?: boolean;
}
const posts = await getPosts();

const nonDraftPosts = posts.filter((post) => !Object.hasOwn(post, 'draft'));

function getPosts() {
  return Astro.glob<Frontmatter>('./*.md');
}
---

<Layout title="Christopher Vaillancourt">
  <main>
    <h1 class="text-gradient">Posts</h1>
    {
      nonDraftPosts.map((post) => (
        <article>
          <h2>{post.frontmatter.title}</h2>
          <p>{post.frontmatter.summary}</p>
          <Link href={post.url}>Read more</Link>
        </article>
      ))
    }
  </main>
</Layout>
